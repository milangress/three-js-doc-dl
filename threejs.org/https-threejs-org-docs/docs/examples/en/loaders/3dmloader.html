<div id="readability-page-1" class="page"><div>
		<meta charset="utf-8">
		<base href="../../../">
		
		
	
	
		<p><a data-fragment="Loader" title="Loader" href="https://threejs.org/docs/index.html#api/en/loaders/Loader">Loader</a> →
		</p>

		<div><p>
			A loader for Rhinoceros 3d files and objects. </p><p>
			Rhinoceros is a 3D modeler used to create, edit, analyze, document, render, animate, and translate NURBS curves, surfaces, breps, extrusions, point clouds, as well as polygon meshes and SubD objects.
			<a href="https://github.com/mcneel/rhino3dm" target="_blank">rhino3dm.js</a> is compiled to WebAssembly from the open source geometry library <a href="https://github.com/mcneel/opennurbs" target="_blank">openNURBS</a>.
			The loader currently uses <a href="https://www.npmjs.com/package/rhino3dm/v/8.4.0" target="_blank">rhino3dm.js 8.4.0.</a></p></div>

		<h2>Import</h2>

		<p>
			3DMLoader is an add-on, and must be imported explicitly.
			See <a href="#manual/introduction/Installation" target="_blank">Installation / Addons</a>.
		</p>

		<p><code translate="no"><span>import</span><span> </span><span>{</span><span> </span><span>Rhino3dmLoader</span><span> </span><span>}</span><span> </span><span>from</span><span> </span><span>'three/addons/loaders/3DMLoader.js'</span><span>;</span></code></p><h2>Supported Conversions</h2>

		<p>
			The 3DMLoader converts Rhino objects to the following three.js types:
		</p>

		<table>
			<tbody><tr>
				<th>3dm type</th>
				<th>three.js type</th>
			</tr>
			<tr>
				<td>Point</td>
				<td><a data-fragment="Points" title="Points" href="https://threejs.org/docs/index.html#api/en/objects/Points">Points</a></td>
			</tr>
			<tr>
				<td>PointSet / PointCloud</td>
				<td><a data-fragment="Points" title="Points" href="https://threejs.org/docs/index.html#api/en/objects/Points">Points</a></td>
			</tr>
			<tr>
				<td>TextDot</td>
				<td><a data-fragment="Sprite" title="Sprite" href="https://threejs.org/docs/index.html#api/en/objects/Sprite">Sprite</a></td>
			</tr>
			<tr>
				<td>Curve</td>
				<td><a data-fragment="Line" title="Line" href="https://threejs.org/docs/index.html#api/en/objects/Line">Line</a> <sup> 1</sup></td>
			</tr>
			<tr>
				<td>Mesh</td>
				<td><a data-fragment="Mesh" title="Mesh" href="https://threejs.org/docs/index.html#api/en/objects/Mesh">Mesh</a></td>
			</tr>
			<tr>
				<td>Extrusion</td>
				<td><a data-fragment="Mesh" title="Mesh" href="https://threejs.org/docs/index.html#api/en/objects/Mesh">Mesh</a><sup> 2</sup></td>
			</tr>
			<tr>
				<td>BREP</td>
				<td><a data-fragment="Mesh" title="Mesh" href="https://threejs.org/docs/index.html#api/en/objects/Mesh">Mesh</a><sup> 2</sup></td>
			</tr>
			<tr>
				<td>SubD</td>
				<td><a data-fragment="Mesh" title="Mesh" href="https://threejs.org/docs/index.html#api/en/objects/Mesh">Mesh</a><sup> 3</sup></td>
			</tr>
			<tr>
				<td>InstanceReferences</td>
				<td><a data-fragment="Object3D" title="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a></td>
			</tr>
			<tr>
				<td>DirectionalLight</td>
				<td><a data-fragment="DirectionalLight" title="DirectionalLight" href="https://threejs.org/docs/index.html#api/en/lights/DirectionalLight">DirectionalLight</a></td>
			</tr>
			<tr>
				<td>PointLight</td>
				<td><a data-fragment="PointLight" title="PointLight" href="https://threejs.org/docs/index.html#api/en/lights/PointLight">PointLight</a></td>
			</tr>
			<tr>
				<td>RectangularLight</td>
				<td><a data-fragment="RectAreaLight" title="RectAreaLight" href="https://threejs.org/docs/index.html#api/en/lights/RectAreaLight">RectAreaLight</a></td>
			</tr>
			<tr>
				<td>SpotLight</td>
				<td><a data-fragment="SpotLight" title="SpotLight" href="https://threejs.org/docs/index.html#api/en/lights/SpotLight">SpotLight</a></td>
			</tr>
			<tr>
				<td>File3dm</td>
				<td><a data-fragment="Object3D" title="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a><sup> 4</sup></td>
			</tr>
			<tr>
				<td>Material / Physically Based Material</td>
				<td><a data-fragment="MeshPhysicalMaterial" title="MeshPhysicalMaterial" href="https://threejs.org/docs/index.html#api/en/materials/MeshPhysicalMaterial">MeshPhysicalMaterial</a></td>
			</tr>
		</tbody></table>

		<h3>Notes:</h3>

		<p><i>
			<sup>1</sup> NURBS curves are discretized to a hardcoded resolution.
		</i></p>
		<p><i>
			<sup>2</sup> Types which are based on BREPs and NURBS surfaces are represented with their "Render Mesh". Render meshes might not be associated with these objects if they have not been displayed in an appropriate display mode in Rhino (i.e. "Shaded", "Rendered", etc), or are created programmatically, for example, via Grasshopper or directly with the rhino3dm library. As of rhino3dm.js@8.0.0-beta2, BrepFace and Extrusions can be assigned a mesh representation, but these must be generated by the user.
		</i></p>
		<p><i>
			<sup>3</sup> SubD objects are represented by subdividing their control net.
		</i></p>
		<p><i>
			<sup>4</sup> Whether a Rhino Document (File3dm) is loaded or parsed, the returned object is an <a data-fragment="Object3D" title="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a> with all Rhino objects (File3dmObject) as children. File3dm layers and other file level properties are added to the resulting object's userData.
		</i></p>
		<p><i>
			<sup>5</sup> All resulting three.js objects have useful properties from the Rhino object (i.e. layer index, name, etc.) populated in their userData object.
		</i></p>
		<p><i>
			<sup>6</sup> Rhino and Three.js have a different coordinate system. Upon import, you should rotate the resulting <a data-fragment="Object3D" title="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a> by -90º in x or set the THREE.Object3D.DEFAULT_UP at the beginning of your application: 
			<code translate="no"><span>THREE</span><span>.</span><span>Object3D</span><span>.</span><span>DEFAULT_UP</span><span>.</span><span>set</span><span>(</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>1</span><span> </span><span>);</span></code>
			Keep in mind that this will affect the orientation of all of the Object3Ds in your application.
		</i></p>

		<h2>Examples</h2>

		<p>
			<a href="https://threejs.org/examples/#webgl_loader_3dm" target="_blank">webgl_loader_3dm</a>
		</p>

		<hr>

		<h2>Constructor</h2>

		<h3>Rhino3dmLoader( manager : <a data-fragment="LoadingManager" href="https://threejs.org/docs/index.html#api/en/loaders/managers/LoadingManager">LoadingManager</a> )</h3>
		<p>
		<a data-fragment="LoadingManager" title="LoadingManager" href="https://threejs.org/docs/index.html#api/en/loaders/managers/LoadingManager">manager</a> — The <a data-fragment="LoadingManager" title="LoadingManager" href="https://threejs.org/docs/index.html#api/en/loaders/managers/LoadingManager">loadingManager</a> for the loader to use. Default is <a data-fragment="LoadingManager" title="LoadingManager" href="https://threejs.org/docs/index.html#api/en/loaders/managers/LoadingManager">THREE.DefaultLoadingManager</a>.
		</p>
		<p>
		Creates a new Rhino3dmLoader.
		</p>

		<h2>Properties</h2>
		<p>See the base <a data-fragment="Loader" title="Loader" href="https://threejs.org/docs/index.html#api/en/loaders/Loader">Loader</a> class for common properties.</p>

		<h2>Methods</h2>
		<p>See the base <a data-fragment="Loader" title="Loader" href="https://threejs.org/docs/index.html#api/en/loaders/Loader">Loader</a> class for common methods.</p>

		<h3><a data-fragment="3DMLoader.load" target="_parent" title="3DMLoader.load" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.load">#</a> .<a data-fragment="3DMLoader.load" id="load" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.load">load</a> ( url : <span>String</span>, onLoad : <a data-fragment="Function">Function</a>, onProgress : <a data-fragment="Function">Function</a>, onError : <a data-fragment="Function">Function</a> ) : <a data-fragment="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a></h3>
		<p>
		<a data-fragment="String" title="String">url</a> — A string containing the path/URL of the <code translate="no"><span>.</span><span>3dm</span></code> file.<br>
		<a data-fragment="Function" title="Function">onLoad</a> — A function to be called after the loading is successfully completed.<br>
		<a data-fragment="Function" title="Function">onProgress</a> — (optional) A function to be called while the loading is in progress. The argument will be the XMLHttpRequest instance, that contains .<a data-fragment="Integer" title="Integer">total</a> and .<a data-fragment="Integer" title="Integer">loaded</a> bytes. If the server does not set the Content-Length header; .<a data-fragment="Integer" title="Integer">total</a> will be 0.<br>
		<a data-fragment="Function" title="Function">onError</a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br>
		</p>
		<p>
		Begin loading from url and call the <code translate="no"><span>onLoad</span></code> function with the resulting Object3d.
		</p>

		<p><code translate="no"><span>// Instantiate a loader</span><span>
</span><span>const</span><span> loader </span><span>=</span><span> </span><span>new</span><span> </span><span>Rhino3dmLoader</span><span>();</span><span>
	
</span><span>// Specify path to a folder containing WASM/JS libraries or a CDN.</span><span>
</span><span>// For example, /jsm/libs/rhino3dm/ is the location of the library inside the three.js repository</span><span>
</span><span>// loader.setLibraryPath( '/path_to_library/rhino3dm/' );</span><span>
loader</span><span>.</span><span>setLibraryPath</span><span>(</span><span> </span><span>'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0/'</span><span> </span><span>);</span><span>
	
</span><span>// Load a 3DM file</span><span>
loader</span><span>.</span><span>load</span><span>(</span><span>
	</span><span>// resource URL</span><span>
	</span><span>'model.3dm'</span><span>,</span><span>
	</span><span>// called when the resource is loaded</span><span>
	</span><span>function</span><span> </span><span>(</span><span> </span><span>object</span><span> </span><span>)</span><span> </span><span>{</span><span>
	
		scene</span><span>.</span><span>add</span><span>(</span><span> </span><span>object</span><span> </span><span>);</span><span>
	
	</span><span>},</span><span>
	</span><span>// called as loading progresses</span><span>
	</span><span>function</span><span> </span><span>(</span><span> xhr </span><span>)</span><span> </span><span>{</span><span>
	
		console</span><span>.</span><span>log</span><span>(</span><span> </span><span>(</span><span> xhr</span><span>.</span><span>loaded </span><span>/</span><span> xhr</span><span>.</span><span>total </span><span>*</span><span> </span><span>100</span><span> </span><span>)</span><span> </span><span>+</span><span> </span><span>'% loaded'</span><span> </span><span>);</span><span>
	
	</span><span>},</span><span>
	</span><span>// called when loading has errors</span><span>
	</span><span>function</span><span> </span><span>(</span><span> error </span><span>)</span><span> </span><span>{</span><span>
	
		console</span><span>.</span><span>log</span><span>(</span><span> </span><span>'An error happened'</span><span> </span><span>);</span><span>
	
	</span><span>}</span><span>
</span><span>);</span></code></p><h3><a data-fragment="3DMLoader.parse" target="_parent" title="3DMLoader.parse" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.parse">#</a> .<a data-fragment="3DMLoader.parse" id="parse" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.parse">parse</a> ( buffer : <span>ArrayBuffer</span>, onLoad : <a data-fragment="Function">Function</a>, onProgress : <a data-fragment="Function">Function</a>, onError : <a data-fragment="Function">Function</a> ) : <a data-fragment="Object3D" href="https://threejs.org/docs/index.html#api/en/core/Object3D">Object3D</a></h3>
		<p>
		<a data-fragment="ArrayBuffer" title="ArrayBuffer">buffer</a> — An ArrayBuffer representing the Rhino <code translate="no"><span>File3dm</span></code> document.<br>
		<a data-fragment="Function" title="Function">onLoad</a> — A function to be called after the loading is successfully completed.<br>
		<a data-fragment="Function" title="Function">onError</a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br>
		</p>
		<p>
		Parse a File3dm ArrayBuffer and call the <code translate="no"><span>onLoad</span></code> function with the resulting Object3d.
		See <a href="https://github.com/mcneel/rhino-developer-samples/tree/8/rhino3dm/js/SampleParse3dmObjects" target="_blank">this example</a> for further reference.
		</p>

		<p><code translate="no"><span>import</span><span> rhino3dm </span><span>from</span><span> </span><span>'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span>

</span><span>// Instantiate a loader</span><span>
</span><span>const</span><span> loader </span><span>=</span><span> </span><span>new</span><span> </span><span>Rhino3dmLoader</span><span>();</span><span>

</span><span>// Specify path to a folder containing WASM/JS libraries or a CDN.</span><span>
loader</span><span>.</span><span>setLibraryPath</span><span>(</span><span> </span><span>'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span> </span><span>);</span><span>

</span><span>const</span><span> rhino </span><span>=</span><span> await rhino3dm</span><span>();</span><span>
console</span><span>.</span><span>log</span><span>(</span><span>'Loaded rhino3dm.'</span><span>);</span><span>

</span><span>// create Rhino Document and add a point to it</span><span>
</span><span>const</span><span> doc </span><span>=</span><span> </span><span>new</span><span> rhino</span><span>.</span><span>File3dm</span><span>();</span><span>
</span><span>const</span><span> ptA </span><span>=</span><span> </span><span>[</span><span>0</span><span>,</span><span> </span><span>0</span><span>,</span><span> </span><span>0</span><span>];</span><span>
</span><span>const</span><span> point </span><span>=</span><span> </span><span>new</span><span> rhino</span><span>.</span><span>Point</span><span>(</span><span> ptA </span><span>);</span><span>
doc</span><span>.</span><span>objects</span><span>().</span><span>add</span><span>(</span><span> point</span><span>,</span><span> </span><span>null</span><span> </span><span>);</span><span>

</span><span>// create a copy of the doc.toByteArray data to get an ArrayBuffer</span><span>
</span><span>const</span><span> buffer </span><span>=</span><span> </span><span>new</span><span> </span><span>Uint8Array</span><span>(</span><span> doc</span><span>.</span><span>toByteArray</span><span>()</span><span> </span><span>).</span><span>buffer</span><span>;</span><span>

loader</span><span>.</span><span>parse</span><span>(</span><span> buffer</span><span>,</span><span> </span><span>function</span><span> </span><span>(</span><span> </span><span>object</span><span> </span><span>)</span><span> </span><span>{</span><span>

	scene</span><span>.</span><span>add</span><span>(</span><span> </span><span>object</span><span> </span><span>);</span><span>

</span><span>}</span><span> </span><span>);</span></code></p><h3><a data-fragment="3DMLoader.setLibraryPath" target="_parent" title="3DMLoader.setLibraryPath" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.setLibraryPath">#</a> .<a data-fragment="3DMLoader.setLibraryPath" id="setLibraryPath" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.setLibraryPath">setLibraryPath</a> ( value : <span>String</span> ) : <span>this</span></h3>
		<p>
		<a data-fragment="String" title="String">value</a> — Path to folder containing the JS and WASM libraries.
		</p>
		<p><code translate="no"><span>// Instantiate a loader</span><span>
</span><span>const</span><span> loader </span><span>=</span><span> </span><span>new</span><span> </span><span>Rhino3dmLoader</span><span>();</span><span>

</span><span>// Specify path to a folder containing the WASM/JS library:</span><span>
loader</span><span>.</span><span>setLibraryPath</span><span>(</span><span> </span><span>'/path_to_library/rhino3dm/'</span><span> </span><span>);</span><span>
</span><span>// or from a CDN:</span><span>
loader</span><span>.</span><span>setLibraryPath</span><span>(</span><span> </span><span>'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span> </span><span>);</span></code></p><h3><a data-fragment="3DMLoader.setWorkerLimit" target="_parent" title="3DMLoader.setWorkerLimit" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.setWorkerLimit">#</a> .<a data-fragment="3DMLoader.setWorkerLimit" id="setWorkerLimit" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.setWorkerLimit">setWorkerLimit</a> ( workerLimit : <span>Number</span> ) : <span>this</span></h3>
		<p>
			<a data-fragment="Number" title="Number">workerLimit</a> - Maximum number of workers to be allocated. Default is 4.<br>
		</p>
		<p>
		Sets the maximum number of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank">Web Workers</a>
		to be used during decoding. A lower limit may be preferable if workers are also for other tasks
		in the application.
		</p>

		<h3><a data-fragment="3DMLoader.dispose" target="_parent" title="3DMLoader.dispose" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.dispose">#</a> .<a data-fragment="3DMLoader.dispose" id="dispose" href="https://threejs.org/docs/index.html#examples/en/loaders/3DMLoader.dispose">dispose</a> () : <span>this</span></h3>
		<p>
		Disposes of the loader resources and deallocates memory.
		</p>

		<h2>Source</h2>

		<p>
			<a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/3DMLoader.js" target="_blank">examples/jsm/loaders/3DMLoader.js</a>
		</p>
	

<p><img src="https://threejs.org/files/ic_mode_edit_black_24dp.svg"></p></div></div>