<!DOCTYPE html><html><head><title>Animation system – three.js docs</title></head><body><body>
		<h1>Animation system</h1>

		<h2>Overview</h2>

		<p class=/"desc/">
			Within the three.js animation system you can animate various properties of your models:
			the bones of a <a class=/"links/" data-fragment=/"SkinnedMesh/" title=/"SkinnedMesh/" href=/"./index.html#api/en/objects/SkinnedMesh/">skinned and rigged model</a>, morph targets, different material properties
			(colors, opacity, booleans), visibility and transforms. The animated properties can be faded in,
			faded out, crossfaded and warped. The weight and time scales of different simultaneous
			animations on the same object as well as on different objects can be changed
			independently. Various animations on the same and on different objects can be
			synchronized.<br><br>

			To achieve all this in one homogeneous system, the three.js animation system
			<a href=/"https://github.com/mrdoob/three.js/issues/6881/" target=/"_blank/">has completely changed in 2015</a>
			(beware of outdated information!), and it has now an architecture similar to
			Unity/Unreal Engine 4. This page gives a short overview of the main components of the
			system and how they work together.

		</p>

		<h3>Animation Clips</h3>

		<p class=/"desc/">

			If you have successfully imported an animated 3D object (it doesn't matter if it has
			bones or morph targets or both) — for example exporting it from Blender with the
			<a href=/"https://github.com/KhronosGroup/glTF-Blender-IO/" target=/"_blank/">glTF Blender exporter</a> and
			loading it into a three.js scene using <a class=/"links/" data-fragment=/"GLTFLoader/" title=/"GLTFLoader/" href=/"./index.html#examples/en/loaders/GLTFLoader/">GLTFLoader</a> — one of the response fields
			should be an array named /"animations/", containing the <a class=/"links/" data-fragment=/"AnimationClip/" title=/"AnimationClip/" href=/"./index.html#api/en/animation/AnimationClip/">AnimationClips</a>
			for this model (see a list of possible loaders below).<br><br>

			Each <code class=/"inline prettyprint/" translate=/"no/"><span class=/"typ/">AnimationClip</span></code> usually holds the data for a certain activity of the object. If the
			mesh is a character, for example, there may be one AnimationClip for a walkcycle, a second
			for a jump, a third for sidestepping and so on.

		</p>

		<h3>Keyframe Tracks</h3>

		<p class=/"desc/">

			Inside of such an <code class=/"inline prettyprint/" translate=/"no/"><span class=/"typ/">AnimationClip</span></code> the data for each animated property are stored in a
			separate <a class=/"links/" data-fragment=/"KeyframeTrack/" title=/"KeyframeTrack/" href=/"./index.html#api/en/animation/KeyframeTrack/">KeyframeTrack</a>. Assuming a character object has a <a class=/"links/" data-fragment=/"Skeleton/" title=/"Skeleton/" href=/"./index.html#api/en/objects/Skeleton/">skeleton</a>,
			one keyframe track could store the data for the position changes of the lower arm bone
			over time, a different track the data for the rotation changes of the same bone, a third
			the track position, rotation or scaling of another bone, and so on. It should be clear,
			that an AnimationClip can be composed of lots of such tracks.<br><br>

			Assuming the model has morph targets (for example one morph
			target showing a friendly face and another showing an angry face), each track holds the
			information as to how the <a class=/"links/" data-fragment=/"Mesh.morphTargetInfluences/" title=/"Mesh.morphTargetInfluences/" href=/"./index.html#api/en/objects/Mesh.morphTargetInfluences/">influence</a> of a certain morph
			target changes during the performance of the clip.

		</p>

		<h3>Animation Mixer</h3>

		<p class=/"desc/">

			The stored data forms only the basis for the animations - actual playback is controlled by
			the <a class=/"links/" data-fragment=/"AnimationMixer/" title=/"AnimationMixer/" href=/"./index.html#api/en/animation/AnimationMixer/">AnimationMixer</a>. You can imagine this not only as a player for animations, but
			as a simulation of a hardware like a real mixer console, which can control several animations
			simultaneously, blending and merging them.

		</p>

		<h3>Animation Actions</h3>

		<p class=/"desc/">

			The <code class=/"inline prettyprint/" translate=/"no/"><span class=/"typ/">AnimationMixer</span></code> itself has only very few (general) properties and methods, because it
			can be controlled by the <a class=/"links/" data-fragment=/"AnimationAction/" title=/"AnimationAction/" href=/"./index.html#api/en/animation/AnimationAction/">AnimationActions</a>. By configuring an
			<code class=/"inline prettyprint/" translate=/"no/"><span class=/"typ/">AnimationAction</span></code> you can determine when a certain <code class=/"inline prettyprint/" translate=/"no/"><span class=/"typ/">AnimationClip</span></code> shall be played, paused
			or stopped on one of the mixers, if and how often the clip has to be repeated, whether it
			shall be performed with a fade or a time scaling, and some additional things, such crossfading
			or synchronizing.

		</p>

		<h3>Animation Object Groups</h3>

		<p class=/"desc/">

			If you want a group of objects to receive a shared animation state, you can use an
			<a class=/"links/" data-fragment=/"AnimationObjectGroup/" title=/"AnimationObjectGroup/" href=/"./index.html#api/en/animation/AnimationObjectGroup/">AnimationObjectGroup</a>.

		</p>

		<h3>Supported Formats and Loaders</h3>

		<p class=/"desc/">
			Note that not all model formats include animation (OBJ notably does not), and that only some
			three.js loaders support <a class=/"links/" data-fragment=/"AnimationClip/" title=/"AnimationClip/" href=/"./index.html#api/en/animation/AnimationClip/">AnimationClip</a> sequences. Several that <i>do</i>
			support this animation type:
		</p>

			<ul>
				<li><a class=/"links/" data-fragment=/"ObjectLoader/" title=/"ObjectLoader/" href=/"./index.html#api/en/loaders/ObjectLoader/">THREE.ObjectLoader</a></li>
				<li>THREE.BVHLoader</li>
				<li>THREE.ColladaLoader</li>
				<li>THREE.FBXLoader</li>
				<li><a class=/"links/" data-fragment=/"GLTFLoader/" title=/"GLTFLoader/" href=/"./index.html#examples/en/loaders/GLTFLoader/">THREE.GLTFLoader</a></li>
				<li>THREE.MMDLoader</li>
			</ul>

		<p class=/"desc/">
			Note that 3ds max and Maya currently can't export multiple animations (meaning animations which are not
			on the same timeline) directly to a single file.
		</p>

		<h2>Example</h2>

		<code class=/" prettyprint/" translate=/"no/"><span class=/"pln/">let mesh</span><span class=/"pun/">;</span><span class=/"pln/">

</span><span class=/"com/">// Create an AnimationMixer, and get the list of AnimationClip instances</span><span class=/"pln/">
</span><span class=/"kwd/">const</span><span class=/"pln/"> mixer </span><span class=/"pun/">=</span><span class=/"pln/"> </span><span class=/"kwd/">new</span><span class=/"pln/"> THREE</span><span class=/"pun/">.</span><span class=/"typ/">AnimationMixer</span><span class=/"pun/">(</span><span class=/"pln/"> mesh </span><span class=/"pun/">);</span><span class=/"pln/">
</span><span class=/"kwd/">const</span><span class=/"pln/"> clips </span><span class=/"pun/">=</span><span class=/"pln/"> mesh</span><span class=/"pun/">.</span><span class=/"pln/">animations</span><span class=/"pun/">;</span><span class=/"pln/">

</span><span class=/"com/">// Update the mixer on each frame</span><span class=/"pln/">
</span><span class=/"kwd/">function</span><span class=/"pln/"> update </span><span class=/"pun/">()</span><span class=/"pln/"> </span><span class=/"pun/">{</span><span class=/"pln/">
	mixer</span><span class=/"pun/">.</span><span class=/"pln/">update</span><span class=/"pun/">(</span><span class=/"pln/"> deltaSeconds </span><span class=/"pun/">);</span><span class=/"pln/">
</span><span class=/"pun/">}</span><span class=/"pln/">

</span><span class=/"com/">// Play a specific animation</span><span class=/"pln/">
</span><span class=/"kwd/">const</span><span class=/"pln/"> clip </span><span class=/"pun/">=</span><span class=/"pln/"> THREE</span><span class=/"pun/">.</span><span class=/"typ/">AnimationClip</span><span class=/"pun/">.</span><span class=/"pln/">findByName</span><span class=/"pun/">(</span><span class=/"pln/"> clips</span><span class=/"pun/">,</span><span class=/"pln/"> </span><span class=/"str/">'dance'</span><span class=/"pln/"> </span><span class=/"pun/">);</span><span class=/"pln/">
</span><span class=/"kwd/">const</span><span class=/"pln/"> action </span><span class=/"pun/">=</span><span class=/"pln/"> mixer</span><span class=/"pun/">.</span><span class=/"pln/">clipAction</span><span class=/"pun/">(</span><span class=/"pln/"> clip </span><span class=/"pun/">);</span><span class=/"pln/">
action</span><span class=/"pun/">.</span><span class=/"pln/">play</span><span class=/"pun/">();</span><span class=/"pln/">

</span><span class=/"com/">// Play all animations</span><span class=/"pln/">
clips</span><span class=/"pun/">.</span><span class=/"pln/">forEach</span><span class=/"pun/">(</span><span class=/"pln/"> </span><span class=/"kwd/">function</span><span class=/"pln/"> </span><span class=/"pun/">(</span><span class=/"pln/"> clip </span><span class=/"pun/">)</span><span class=/"pln/"> </span><span class=/"pun/">{</span><span class=/"pln/">
	mixer</span><span class=/"pun/">.</span><span class=/"pln/">clipAction</span><span class=/"pun/">(</span><span class=/"pln/"> clip </span><span class=/"pun/">).</span><span class=/"pln/">play</span><span class=/"pun/">();</span><span class=/"pln/">
</span><span class=/"pun/">}</span><span class=/"pln/"> </span><span class=/"pun/">);</span></code>

	

<div id=/"button/"><img src=/"../files/ic_mode_edit_black_24dp.svg/"></div></body></body></html>