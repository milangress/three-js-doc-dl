<!DOCTYPE html><html><head><title>MeshSurfaceSampler – three.js docs</title></head><body><body>
		<h1>MeshSurfaceSampler</h1>

		<p class="desc">Utility class for sampling weighted random points on the surface of a mesh.</p>

		<p>Weighted sampling is useful for effects like heavier foliage growth in certain areas of terrain, or concentrated particle emissions from specific parts of a mesh. Vertex weights may be written programmatically, or painted by hand as vertex colors in 3D tools like Blender.</p>

		<h2>Import</h2>

		<p>
			MeshSurfaceSampler is an add-on, and must be imported explicitly.
			See <a href="#manual/introduction/Installation" target="_blank">Installation / Addons</a>.
		</p>

		<code class=" prettyprint" translate="no"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">MeshSurfaceSampler</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'three/addons/math/MeshSurfaceSampler.js'</span><span class="pun">;</span></code>

		<h2>Code Example</h2>

		<code class=" prettyprint" translate="no"><span class="com">// Create a sampler for a Mesh surface.</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> sampler </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">MeshSurfaceSampler</span><span class="pun">(</span><span class="pln"> surfaceMesh </span><span class="pun">)</span><span class="pln">
	</span><span class="pun">.</span><span class="pln">setWeightAttribute</span><span class="pun">(</span><span class="pln"> </span><span class="str">'color'</span><span class="pln"> </span><span class="pun">)</span><span class="pln">
	</span><span class="pun">.</span><span class="pln">build</span><span class="pun">();</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> mesh </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">InstancedMesh</span><span class="pun">(</span><span class="pln"> sampleGeometry</span><span class="pun">,</span><span class="pln"> sampleMaterial</span><span class="pun">,</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> position </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Vector3</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> matrix </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Matrix4</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Sample randomly from the surface, creating an instance of the sample</span><span class="pln">
</span><span class="com">// geometry at each sample point.</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> let i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">100</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">++</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	sampler</span><span class="pun">.</span><span class="pln">sample</span><span class="pun">(</span><span class="pln"> position </span><span class="pun">);</span><span class="pln">

	matrix</span><span class="pun">.</span><span class="pln">makeTranslation</span><span class="pun">(</span><span class="pln"> position</span><span class="pun">.</span><span class="pln">x</span><span class="pun">,</span><span class="pln"> position</span><span class="pun">.</span><span class="pln">y</span><span class="pun">,</span><span class="pln"> position</span><span class="pun">.</span><span class="pln">z </span><span class="pun">);</span><span class="pln">

	mesh</span><span class="pun">.</span><span class="pln">setMatrixAt</span><span class="pun">(</span><span class="pln"> i</span><span class="pun">,</span><span class="pln"> matrix </span><span class="pun">);</span><span class="pln">

</span><span class="pun">}</span><span class="pln">

scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> mesh </span><span class="pun">);</span></code>

		<h2>Examples</h2>
		<p>
			<a href="../examples/#webgl_instancing_scatter" target="_blank">webgl_instancing_scatter</a>
		</p>

		<h2>Constructor</h2>

		<h3>MeshSurfaceSampler( mesh : <a class="param links" data-fragment="Mesh" href="./index.html#api/en/objects/Mesh">Mesh</a> )</h3>
		<p>
		<a class="links" data-fragment="Mesh" title="Mesh" href="./index.html#api/en/objects/Mesh">mesh</a> — Surface mesh from which to sample.
		</p>
		<p>
		Creates a new MeshSurfaceSampler. If the input geometry is indexed, a non-indexed copy is made. After construction, the sampler is not able to return samples until <a class="links" data-fragment="MeshSurfaceSampler.build" title="MeshSurfaceSampler.build" href="./index.html#examples/en/math/MeshSurfaceSampler.build">build</a> is called.
		</p>

		<h2>Methods</h2>

		<h3><a class="permalink links" data-fragment="MeshSurfaceSampler.setWeightAttribute" target="_parent" title="MeshSurfaceSampler.setWeightAttribute" href="./index.html#examples/en/math/MeshSurfaceSampler.setWeightAttribute">#</a> .<a class="links" data-fragment="MeshSurfaceSampler.setWeightAttribute" id="setWeightAttribute" href="./index.html#examples/en/math/MeshSurfaceSampler.setWeightAttribute">setWeightAttribute</a> ( name : <span class="param">String</span> ) : <span class="param">this</span></h3>
		<p>
		Specifies a vertex attribute to be used as a weight when sampling from the surface. Faces with higher weights are more likely to be sampled, and those with weights of zero will not be sampled at all. For vector attributes, only <i>.x</i> is used in sampling.
		</p>
		<p>If no weight attribute is selected, sampling is randomly distributed by area.</p>

		<h3><a class="permalink links" data-fragment="MeshSurfaceSampler.build" target="_parent" title="MeshSurfaceSampler.build" href="./index.html#examples/en/math/MeshSurfaceSampler.build">#</a> .<a class="links" data-fragment="MeshSurfaceSampler.build" id="build" href="./index.html#examples/en/math/MeshSurfaceSampler.build">build</a> () : <span class="param">this</span></h3>
		<p>
		Processes the input geometry and prepares to return samples. Any configuration of the geometry or sampler must occur before this method is called. Time complexity is <i>O(n)</i> for a surface with <i>n</i> faces.
		</p>

		<h3><a class="permalink links" data-fragment="MeshSurfaceSampler.sample" target="_parent" title="MeshSurfaceSampler.sample" href="./index.html#examples/en/math/MeshSurfaceSampler.sample">#</a> .<a class="links" data-fragment="MeshSurfaceSampler.sample" id="sample" href="./index.html#examples/en/math/MeshSurfaceSampler.sample">sample</a> ( targetPosition : <a class="param links" data-fragment="Vector3" href="./index.html#api/en/math/Vector3">Vector3</a>, targetNormal : <a class="param links" data-fragment="Vector3" href="./index.html#api/en/math/Vector3">Vector3</a>, targetColor : <a class="param links" data-fragment="Color" href="./index.html#api/en/math/Color">Color</a>, targetUV : <a class="param links" data-fragment="Vector2" href="./index.html#api/en/math/Vector2">Vector2</a> ) : <span class="param">this</span></h3>
		<p>
		Selects a random point on the surface of the input geometry, returning the position and optionally the normal vector, color and UV Coordinate at that point. Time complexity is <i>O(log n)</i> for a surface with <i>n</i> faces.</p>

		<h2>Source</h2>

		<p>
		<a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/math/MeshSurfaceSampler.js" target="_blank">examples/jsm/math/MeshSurfaceSampler.js</a>
		</p>
	

<div id="button"><img src="../files/ic_mode_edit_black_24dp.svg"></div></body></body></html>