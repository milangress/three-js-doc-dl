<!DOCTYPE html><html><head><title>DRACOLoader – three.js docs</title></head><body><body>
		<a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> →
		<h1>DRACOLoader</h1>

		<p class="desc">
			A loader for geometry compressed with the Draco library. <br><br>
			<a href="https://google.github.io/draco/" target="_blank">Draco</a> is an open source library for compressing and
			decompressing 3D meshes and point clouds. Compressed geometry can be significantly smaller,
			at the cost of additional decoding time on the client device.
		</p>

		<p>
			Standalone Draco files have a <code class="inline prettyprint" translate="no"><span class="pun">.</span><span class="pln">drc</span></code> extension, and contain vertex positions,
			normals, colors, and other attributes. Draco files <strong>do not</strong> contain materials,
			textures, animation, or node hierarchies – to use these features, embed Draco geometry
			inside of a glTF file. A normal glTF file can be converted to a Draco-compressed glTF file
			using <a href="https://github.com/AnalyticalGraphicsInc/gltf-pipeline" target="_blank">glTF-Pipeline</a>. When
			using Draco with glTF, an instance of DRACOLoader will be used internally by <a class="links" data-fragment="GLTFLoader" title="GLTFLoader" href="./index.html#examples/en/loaders/GLTFLoader">GLTFLoader</a>.
		</p>

		<p>
			It is recommended to create one DRACOLoader instance and reuse it to avoid loading and creating multiple
			decoder instances.
		</p>

		<h2>Import</h2>

		<p>
			DRACOLoader is an add-on, and must be imported explicitly.
			See <a href="#manual/introduction/Installation" target="_blank">Installation / Addons</a>.
		</p>

		<code class=" prettyprint" translate="no"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">DRACOLoader</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'three/addons/loaders/DRACOLoader.js'</span><span class="pun">;</span></code>

		<h2>Code Example</h2>

		<code class=" prettyprint" translate="no"><span class="com">// Instantiate a loader</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">DRACOLoader</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Specify path to a folder containing WASM/JS decoding libraries.</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">setDecoderPath</span><span class="pun">(</span><span class="pln"> </span><span class="str">'/examples/jsm/libs/draco/'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// Optional: Pre-fetch Draco WASM/JS module.</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">preload</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Load a Draco geometry</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(</span><span class="pln">
	</span><span class="com">// resource URL</span><span class="pln">
	</span><span class="str">'model.drc'</span><span class="pun">,</span><span class="pln">
	</span><span class="com">// called when the resource is loaded</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> geometry </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

		</span><span class="kwd">const</span><span class="pln"> material </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">MeshStandardMaterial</span><span class="pun">(</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> color</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0x606060</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
		</span><span class="kwd">const</span><span class="pln"> mesh </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">Mesh</span><span class="pun">(</span><span class="pln"> geometry</span><span class="pun">,</span><span class="pln"> material </span><span class="pun">);</span><span class="pln">
		scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> mesh </span><span class="pun">);</span><span class="pln">

	</span><span class="pun">},</span><span class="pln">
	</span><span class="com">// called as loading progresses</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> xhr </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

		console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> xhr</span><span class="pun">.</span><span class="pln">loaded </span><span class="pun">/</span><span class="pln"> xhr</span><span class="pun">.</span><span class="pln">total </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'% loaded'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

	</span><span class="pun">},</span><span class="pln">
	</span><span class="com">// called when loading has errors</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> error </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

		console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'An error happened'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">);</span></code>

		<h2>Examples</h2>

		<p>
			<a href="../examples/#webgl_loader_draco" target="_blank">webgl_loader_draco</a>
		</p>

		<h2>Browser compatibility</h2>

		<p>DRACOLoader will automatically use either the JS or the WASM decoding library, based on browser capabilities.</p>

		<br>
		<hr>

		<h2>Constructor</h2>

		<h3>DRACOLoader( manager : <a class="param links" data-fragment="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">LoadingManager</a> )</h3>
		<p>
		<a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">manager</a> — The <a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">loadingManager</a> for the loader to use. Default is <a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">THREE.DefaultLoadingManager</a>.
		</p>
		<p>
		Creates a new DRACOLoader.
		</p>

		<h2>Properties</h2>
		<p>See the base <a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> class for common properties.</p>

		<h2>Methods</h2>
		<p>See the base <a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> class for common methods.</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.load" target="_parent" title="DRACOLoader.load" href="./index.html#examples/en/loaders/DRACOLoader.load">#</a> .<a class="links" data-fragment="DRACOLoader.load" id="load" href="./index.html#examples/en/loaders/DRACOLoader.load">load</a> ( url : <span class="param">String</span>, onLoad : <a class="param links" data-fragment="Function">Function</a>, onProgress : <a class="param links" data-fragment="Function">Function</a>, onError : <a class="param links" data-fragment="Function">Function</a> ) : <span class="param">undefined</span></h3>
		<p>
		<a class="links" data-fragment="String" title="String">url</a> — A string containing the path/URL of the <code class="inline prettyprint" translate="no"><span class="pun">.</span><span class="pln">drc</span></code> file.<br>
		<a class="links" data-fragment="Function" title="Function">onLoad</a> — A function to be called after the loading is successfully completed.<br>
		<a class="links" data-fragment="Function" title="Function">onProgress</a> — (optional) A function to be called while the loading is in progress. The argument will be the XMLHttpRequest instance, that contains .<a class="links" data-fragment="Integer" title="Integer">total</a> and .<a class="links" data-fragment="Integer" title="Integer">loaded</a> bytes. If the server does not set the Content-Length header; .<a class="links" data-fragment="Integer" title="Integer">total</a> will be 0.<br>
		<a class="links" data-fragment="Function" title="Function">onError</a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br>
		</p>
		<p>
		Begin loading from url and call the <code class="inline prettyprint" translate="no"><span class="pln">onLoad</span></code> function with the decompressed geometry.
		</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.setDecoderPath" target="_parent" title="DRACOLoader.setDecoderPath" href="./index.html#examples/en/loaders/DRACOLoader.setDecoderPath">#</a> .<a class="links" data-fragment="DRACOLoader.setDecoderPath" id="setDecoderPath" href="./index.html#examples/en/loaders/DRACOLoader.setDecoderPath">setDecoderPath</a> ( value : <span class="param">String</span> ) : <span class="param">this</span></h3>
		<p>
		<a class="links" data-fragment="String" title="String">value</a> — Path to folder containing the JS and WASM decoder libraries.
		</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.setDecoderConfig" target="_parent" title="DRACOLoader.setDecoderConfig" href="./index.html#examples/en/loaders/DRACOLoader.setDecoderConfig">#</a> .<a class="links" data-fragment="DRACOLoader.setDecoderConfig" id="setDecoderConfig" href="./index.html#examples/en/loaders/DRACOLoader.setDecoderConfig">setDecoderConfig</a> ( config : <span class="param">Object</span> ) : <span class="param">this</span></h3>
		<p>
			<a class="links" data-fragment="String" title="String">config.type</a> - (Optional) <code class="inline prettyprint" translate="no"><span class="str">"js"</span></code> or <code class="inline prettyprint" translate="no"><span class="str">"wasm"</span></code>.<br>
		</p>
		<p>
		Provides configuration for the decoder libraries. Configuration cannot be changed
		after decoding begins.
		</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.setWorkerLimit" target="_parent" title="DRACOLoader.setWorkerLimit" href="./index.html#examples/en/loaders/DRACOLoader.setWorkerLimit">#</a> .<a class="links" data-fragment="DRACOLoader.setWorkerLimit" id="setWorkerLimit" href="./index.html#examples/en/loaders/DRACOLoader.setWorkerLimit">setWorkerLimit</a> ( workerLimit : <span class="param">Number</span> ) : <span class="param">this</span></h3>
		<p>
			<a class="links" data-fragment="Number" title="Number">workerLimit</a> - Maximum number of workers to be allocated. Default is 4.<br>
		</p>
		<p>
		Sets the maximum number of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank">Web Workers</a>
		to be used during decoding. A lower limit may be preferable if workers are also for other tasks
		in the application.
		</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.preload" target="_parent" title="DRACOLoader.preload" href="./index.html#examples/en/loaders/DRACOLoader.preload">#</a> .<a class="links" data-fragment="DRACOLoader.preload" id="preload" href="./index.html#examples/en/loaders/DRACOLoader.preload">preload</a> () : <span class="param">this</span></h3>
		<p>
		Requests the decoder libraries, if not already loaded.
		</p>

		<h3><a class="permalink links" data-fragment="DRACOLoader.dispose" target="_parent" title="DRACOLoader.dispose" href="./index.html#examples/en/loaders/DRACOLoader.dispose">#</a> .<a class="links" data-fragment="DRACOLoader.dispose" id="dispose" href="./index.html#examples/en/loaders/DRACOLoader.dispose">dispose</a> () : <span class="param">this</span></h3>
		<p>
		Disposes of the decoder resources and deallocates memory. The decoder
		<a href="https://github.com/google/draco/issues/349" target="_blank">cannot be reloaded afterward</a>.
		</p>

		<h2>Source</h2>

		<p>
			<a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/DRACOLoader.js" target="_blank">examples/jsm/loaders/DRACOLoader.js</a>
		</p>
	

<div id="button"><img src="../files/ic_mode_edit_black_24dp.svg"></div></body></body></html>