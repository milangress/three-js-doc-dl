<!DOCTYPE html><html><head><title>3DMLoader – three.js docs</title></head><body><body>
		<a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> →
		<h1>3DMLoader</h1>

		<p class="desc">
			A loader for Rhinoceros 3d files and objects. <br><br>
			Rhinoceros is a 3D modeler used to create, edit, analyze, document, render, animate, and translate NURBS curves, surfaces, breps, extrusions, point clouds, as well as polygon meshes and SubD objects.
			<a href="https://github.com/mcneel/rhino3dm" target="_blank">rhino3dm.js</a> is compiled to WebAssembly from the open source geometry library <a href="https://github.com/mcneel/opennurbs" target="_blank">openNURBS</a>.
			The loader currently uses <a href="https://www.npmjs.com/package/rhino3dm/v/8.4.0" target="_blank">rhino3dm.js 8.4.0.</a>
		</p>

		<h2>Import</h2>

		<p>
			3DMLoader is an add-on, and must be imported explicitly.
			See <a href="#manual/introduction/Installation" target="_blank">Installation / Addons</a>.
		</p>

		<code class=" prettyprint" translate="no"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Rhino3dmLoader</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'three/addons/loaders/3DMLoader.js'</span><span class="pun">;</span></code>

		<h2>Supported Conversions</h2>

		<p>
			The 3DMLoader converts Rhino objects to the following three.js types:
		</p>

		<table>
			<tbody><tr>
				<th>3dm type</th>
				<th>three.js type</th>
			</tr>
			<tr>
				<td>Point</td>
				<td><a class="links" data-fragment="Points" title="Points" href="./index.html#api/en/objects/Points">Points</a></td>
			</tr>
			<tr>
				<td>PointSet / PointCloud</td>
				<td><a class="links" data-fragment="Points" title="Points" href="./index.html#api/en/objects/Points">Points</a></td>
			</tr>
			<tr>
				<td>TextDot</td>
				<td><a class="links" data-fragment="Sprite" title="Sprite" href="./index.html#api/en/objects/Sprite">Sprite</a></td>
			</tr>
			<tr>
				<td>Curve</td>
				<td><a class="links" data-fragment="Line" title="Line" href="./index.html#api/en/objects/Line">Line</a> <sup> 1</sup></td>
			</tr>
			<tr>
				<td>Mesh</td>
				<td><a class="links" data-fragment="Mesh" title="Mesh" href="./index.html#api/en/objects/Mesh">Mesh</a></td>
			</tr>
			<tr>
				<td>Extrusion</td>
				<td><a class="links" data-fragment="Mesh" title="Mesh" href="./index.html#api/en/objects/Mesh">Mesh</a><sup> 2</sup></td>
			</tr>
			<tr>
				<td>BREP</td>
				<td><a class="links" data-fragment="Mesh" title="Mesh" href="./index.html#api/en/objects/Mesh">Mesh</a><sup> 2</sup></td>
			</tr>
			<tr>
				<td>SubD</td>
				<td><a class="links" data-fragment="Mesh" title="Mesh" href="./index.html#api/en/objects/Mesh">Mesh</a><sup> 3</sup></td>
			</tr>
			<tr>
				<td>InstanceReferences</td>
				<td><a class="links" data-fragment="Object3D" title="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a></td>
			</tr>
			<tr>
				<td>DirectionalLight</td>
				<td><a class="links" data-fragment="DirectionalLight" title="DirectionalLight" href="./index.html#api/en/lights/DirectionalLight">DirectionalLight</a></td>
			</tr>
			<tr>
				<td>PointLight</td>
				<td><a class="links" data-fragment="PointLight" title="PointLight" href="./index.html#api/en/lights/PointLight">PointLight</a></td>
			</tr>
			<tr>
				<td>RectangularLight</td>
				<td><a class="links" data-fragment="RectAreaLight" title="RectAreaLight" href="./index.html#api/en/lights/RectAreaLight">RectAreaLight</a></td>
			</tr>
			<tr>
				<td>SpotLight</td>
				<td><a class="links" data-fragment="SpotLight" title="SpotLight" href="./index.html#api/en/lights/SpotLight">SpotLight</a></td>
			</tr>
			<tr>
				<td>File3dm</td>
				<td><a class="links" data-fragment="Object3D" title="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a><sup> 4</sup></td>
			</tr>
			<tr>
				<td>Material / Physically Based Material</td>
				<td><a class="links" data-fragment="MeshPhysicalMaterial" title="MeshPhysicalMaterial" href="./index.html#api/en/materials/MeshPhysicalMaterial">MeshPhysicalMaterial</a></td>
			</tr>
		</tbody></table>

		<h3>Notes:</h3>

		<p><i>
			<sup>1</sup> NURBS curves are discretized to a hardcoded resolution.
		</i></p>
		<p><i>
			<sup>2</sup> Types which are based on BREPs and NURBS surfaces are represented with their "Render Mesh". Render meshes might not be associated with these objects if they have not been displayed in an appropriate display mode in Rhino (i.e. "Shaded", "Rendered", etc), or are created programmatically, for example, via Grasshopper or directly with the rhino3dm library. As of rhino3dm.js@8.0.0-beta2, BrepFace and Extrusions can be assigned a mesh representation, but these must be generated by the user.
		</i></p>
		<p><i>
			<sup>3</sup> SubD objects are represented by subdividing their control net.
		</i></p>
		<p><i>
			<sup>4</sup> Whether a Rhino Document (File3dm) is loaded or parsed, the returned object is an <a class="links" data-fragment="Object3D" title="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a> with all Rhino objects (File3dmObject) as children. File3dm layers and other file level properties are added to the resulting object's userData.
		</i></p>
		<p><i>
			<sup>5</sup> All resulting three.js objects have useful properties from the Rhino object (i.e. layer index, name, etc.) populated in their userData object.
		</i></p>
		<p><i>
			<sup>6</sup> Rhino and Three.js have a different coordinate system. Upon import, you should rotate the resulting <a class="links" data-fragment="Object3D" title="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a> by -90º in x or set the THREE.Object3D.DEFAULT_UP at the beginning of your application: 
			<code class=" prettyprint" translate="no"><span class="pln">THREE</span><span class="pun">.</span><span class="typ">Object3D</span><span class="pun">.</span><span class="pln">DEFAULT_UP</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">);</span></code>
			Keep in mind that this will affect the orientation of all of the Object3Ds in your application.
		</i></p>

		<h2>Examples</h2>

		<p>
			<a href="../examples/#webgl_loader_3dm" target="_blank">webgl_loader_3dm</a>
		</p>

		<hr>

		<h2>Constructor</h2>

		<h3>Rhino3dmLoader( manager : <a class="param links" data-fragment="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">LoadingManager</a> )</h3>
		<p>
		<a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">manager</a> — The <a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">loadingManager</a> for the loader to use. Default is <a class="links" data-fragment="LoadingManager" title="LoadingManager" href="./index.html#api/en/loaders/managers/LoadingManager">THREE.DefaultLoadingManager</a>.
		</p>
		<p>
		Creates a new Rhino3dmLoader.
		</p>

		<h2>Properties</h2>
		<p>See the base <a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> class for common properties.</p>

		<h2>Methods</h2>
		<p>See the base <a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> class for common methods.</p>

		<h3><a class="permalink links" data-fragment="3DMLoader.load" target="_parent" title="3DMLoader.load" href="./index.html#examples/en/loaders/3DMLoader.load">#</a> .<a class="links" data-fragment="3DMLoader.load" id="load" href="./index.html#examples/en/loaders/3DMLoader.load">load</a> ( url : <span class="param">String</span>, onLoad : <a class="param links" data-fragment="Function">Function</a>, onProgress : <a class="param links" data-fragment="Function">Function</a>, onError : <a class="param links" data-fragment="Function">Function</a> ) : <a class="param links" data-fragment="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a></h3>
		<p>
		<a class="links" data-fragment="String" title="String">url</a> — A string containing the path/URL of the <code class="inline prettyprint" translate="no"><span class="pun">.</span><span class="lit">3dm</span></code> file.<br>
		<a class="links" data-fragment="Function" title="Function">onLoad</a> — A function to be called after the loading is successfully completed.<br>
		<a class="links" data-fragment="Function" title="Function">onProgress</a> — (optional) A function to be called while the loading is in progress. The argument will be the XMLHttpRequest instance, that contains .<a class="links" data-fragment="Integer" title="Integer">total</a> and .<a class="links" data-fragment="Integer" title="Integer">loaded</a> bytes. If the server does not set the Content-Length header; .<a class="links" data-fragment="Integer" title="Integer">total</a> will be 0.<br>
		<a class="links" data-fragment="Function" title="Function">onError</a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br>
		</p>
		<p>
		Begin loading from url and call the <code class="inline prettyprint" translate="no"><span class="pln">onLoad</span></code> function with the resulting Object3d.
		</p>

		<code class=" prettyprint" translate="no"><span class="com">// Instantiate a loader</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Rhino3dmLoader</span><span class="pun">();</span><span class="pln">
	
</span><span class="com">// Specify path to a folder containing WASM/JS libraries or a CDN.</span><span class="pln">
</span><span class="com">// For example, /jsm/libs/rhino3dm/ is the location of the library inside the three.js repository</span><span class="pln">
</span><span class="com">// loader.setLibraryPath( '/path_to_library/rhino3dm/' );</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">setLibraryPath</span><span class="pun">(</span><span class="pln"> </span><span class="str">'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0/'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
	
</span><span class="com">// Load a 3DM file</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(</span><span class="pln">
	</span><span class="com">// resource URL</span><span class="pln">
	</span><span class="str">'model.3dm'</span><span class="pun">,</span><span class="pln">
	</span><span class="com">// called when the resource is loaded</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	
		scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
	
	</span><span class="pun">},</span><span class="pln">
	</span><span class="com">// called as loading progresses</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> xhr </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	
		console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> xhr</span><span class="pun">.</span><span class="pln">loaded </span><span class="pun">/</span><span class="pln"> xhr</span><span class="pun">.</span><span class="pln">total </span><span class="pun">*</span><span class="pln"> </span><span class="lit">100</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="str">'% loaded'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
	
	</span><span class="pun">},</span><span class="pln">
	</span><span class="com">// called when loading has errors</span><span class="pln">
	</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> error </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	
		console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'An error happened'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
	
	</span><span class="pun">}</span><span class="pln">
</span><span class="pun">);</span></code>

		<h3><a class="permalink links" data-fragment="3DMLoader.parse" target="_parent" title="3DMLoader.parse" href="./index.html#examples/en/loaders/3DMLoader.parse">#</a> .<a class="links" data-fragment="3DMLoader.parse" id="parse" href="./index.html#examples/en/loaders/3DMLoader.parse">parse</a> ( buffer : <span class="param">ArrayBuffer</span>, onLoad : <a class="param links" data-fragment="Function">Function</a>, onProgress : <a class="param links" data-fragment="Function">Function</a>, onError : <a class="param links" data-fragment="Function">Function</a> ) : <a class="param links" data-fragment="Object3D" href="./index.html#api/en/core/Object3D">Object3D</a></h3>
		<p>
		<a class="links" data-fragment="ArrayBuffer" title="ArrayBuffer">buffer</a> — An ArrayBuffer representing the Rhino <code class="inline prettyprint" translate="no"><span class="typ">File3dm</span></code> document.<br>
		<a class="links" data-fragment="Function" title="Function">onLoad</a> — A function to be called after the loading is successfully completed.<br>
		<a class="links" data-fragment="Function" title="Function">onError</a> — (optional) A function to be called if an error occurs during loading. The function receives error as an argument.<br>
		</p>
		<p>
		Parse a File3dm ArrayBuffer and call the <code class="inline prettyprint" translate="no"><span class="pln">onLoad</span></code> function with the resulting Object3d.
		See <a href="https://github.com/mcneel/rhino-developer-samples/tree/8/rhino3dm/js/SampleParse3dmObjects" target="_blank">this example</a> for further reference.
		</p>

		<code class=" prettyprint" translate="no"><span class="kwd">import</span><span class="pln"> rhino3dm </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span class="pln">

</span><span class="com">// Instantiate a loader</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Rhino3dmLoader</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Specify path to a folder containing WASM/JS libraries or a CDN.</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">setLibraryPath</span><span class="pun">(</span><span class="pln"> </span><span class="str">'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> rhino </span><span class="pun">=</span><span class="pln"> await rhino3dm</span><span class="pun">();</span><span class="pln">
console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">'Loaded rhino3dm.'</span><span class="pun">);</span><span class="pln">

</span><span class="com">// create Rhino Document and add a point to it</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> doc </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> rhino</span><span class="pun">.</span><span class="typ">File3dm</span><span class="pun">();</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> ptA </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> point </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> rhino</span><span class="pun">.</span><span class="typ">Point</span><span class="pun">(</span><span class="pln"> ptA </span><span class="pun">);</span><span class="pln">
doc</span><span class="pun">.</span><span class="pln">objects</span><span class="pun">().</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> point</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// create a copy of the doc.toByteArray data to get an ArrayBuffer</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> buffer </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Uint8Array</span><span class="pun">(</span><span class="pln"> doc</span><span class="pun">.</span><span class="pln">toByteArray</span><span class="pun">()</span><span class="pln"> </span><span class="pun">).</span><span class="pln">buffer</span><span class="pun">;</span><span class="pln">

loader</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln"> buffer</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="pun">}</span><span class="pln"> </span><span class="pun">);</span></code>

		<h3><a class="permalink links" data-fragment="3DMLoader.setLibraryPath" target="_parent" title="3DMLoader.setLibraryPath" href="./index.html#examples/en/loaders/3DMLoader.setLibraryPath">#</a> .<a class="links" data-fragment="3DMLoader.setLibraryPath" id="setLibraryPath" href="./index.html#examples/en/loaders/3DMLoader.setLibraryPath">setLibraryPath</a> ( value : <span class="param">String</span> ) : <span class="param">this</span></h3>
		<p>
		<a class="links" data-fragment="String" title="String">value</a> — Path to folder containing the JS and WASM libraries.
		</p>
		<code class=" prettyprint" translate="no"><span class="com">// Instantiate a loader</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Rhino3dmLoader</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Specify path to a folder containing the WASM/JS library:</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">setLibraryPath</span><span class="pun">(</span><span class="pln"> </span><span class="str">'/path_to_library/rhino3dm/'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="com">// or from a CDN:</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">setLibraryPath</span><span class="pun">(</span><span class="pln"> </span><span class="str">'https://cdn.jsdelivr.net/npm/rhino3dm@8.4.0'</span><span class="pln"> </span><span class="pun">);</span></code>

		<h3><a class="permalink links" data-fragment="3DMLoader.setWorkerLimit" target="_parent" title="3DMLoader.setWorkerLimit" href="./index.html#examples/en/loaders/3DMLoader.setWorkerLimit">#</a> .<a class="links" data-fragment="3DMLoader.setWorkerLimit" id="setWorkerLimit" href="./index.html#examples/en/loaders/3DMLoader.setWorkerLimit">setWorkerLimit</a> ( workerLimit : <span class="param">Number</span> ) : <span class="param">this</span></h3>
		<p>
			<a class="links" data-fragment="Number" title="Number">workerLimit</a> - Maximum number of workers to be allocated. Default is 4.<br>
		</p>
		<p>
		Sets the maximum number of <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" target="_blank">Web Workers</a>
		to be used during decoding. A lower limit may be preferable if workers are also for other tasks
		in the application.
		</p>

		<h3><a class="permalink links" data-fragment="3DMLoader.dispose" target="_parent" title="3DMLoader.dispose" href="./index.html#examples/en/loaders/3DMLoader.dispose">#</a> .<a class="links" data-fragment="3DMLoader.dispose" id="dispose" href="./index.html#examples/en/loaders/3DMLoader.dispose">dispose</a> () : <span class="param">this</span></h3>
		<p>
		Disposes of the loader resources and deallocates memory.
		</p>

		<h2>Source</h2>

		<p>
			<a href="https://github.com/mrdoob/three.js/blob/master/examples/jsm/loaders/3DMLoader.js" target="_blank">examples/jsm/loaders/3DMLoader.js</a>
		</p>
	

<div id="button"><img src="../files/ic_mode_edit_black_24dp.svg"></div></body></body></html>