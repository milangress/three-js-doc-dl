<!DOCTYPE html><html><head><title>LoadingManager – three.js docs</title></head><body><body>
		<h1>LoadingManager</h1>

		<p class="desc">
			Handles and keeps track of loaded and pending data. A default global
			instance of this class is created and used by loaders if not supplied
			manually - see <a class="links" data-fragment="DefaultLoadingManager" title="DefaultLoadingManager" href="./index.html#api/en/loaders/managers/DefaultLoadingManager">DefaultLoadingManager</a>.<br><br>

			In general that should be sufficient, however there are times when it can
			be useful to have separate loaders - for example if you want to show
			separate loading bars for objects and textures.
		</p>

		<h2>Code Example</h2>

		<p>
			This example shows how to use LoadingManager to track the progress of
			<a class="links" data-fragment="OBJLoader" title="OBJLoader" href="./index.html#examples/en/loaders/OBJLoader">OBJLoader</a>.
		</p>

		<code class=" prettyprint" translate="no"><span class="kwd">const</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">LoadingManager</span><span class="pun">();</span><span class="pln">
manager</span><span class="pun">.</span><span class="pln">onStart </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> url</span><span class="pun">,</span><span class="pln"> itemsLoaded</span><span class="pun">,</span><span class="pln"> itemsTotal </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'Started loading file: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> url </span><span class="pun">+</span><span class="pln"> </span><span class="str">'.\nLoaded '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> itemsLoaded </span><span class="pun">+</span><span class="pln"> </span><span class="str">' of '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> itemsTotal </span><span class="pun">+</span><span class="pln"> </span><span class="str">' files.'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

manager</span><span class="pun">.</span><span class="pln">onLoad </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'Loading complete!'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

manager</span><span class="pun">.</span><span class="pln">onProgress </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> url</span><span class="pun">,</span><span class="pln"> itemsLoaded</span><span class="pun">,</span><span class="pln"> itemsTotal </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'Loading file: '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> url </span><span class="pun">+</span><span class="pln"> </span><span class="str">'.\nLoaded '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> itemsLoaded </span><span class="pun">+</span><span class="pln"> </span><span class="str">' of '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> itemsTotal </span><span class="pun">+</span><span class="pln"> </span><span class="str">' files.'</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

manager</span><span class="pun">.</span><span class="pln">onError </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> url </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="pln"> </span><span class="str">'There was an error loading '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> url </span><span class="pun">);</span><span class="pln">
</span><span class="pun">};</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">OBJLoader</span><span class="pun">(</span><span class="pln"> manager </span><span class="pun">);</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(</span><span class="pln"> </span><span class="str">'file.obj'</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> </span><span class="kwd">object</span><span class="pln"> </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
	</span><span class="com">//</span><span class="pln">
</span><span class="pun">}</span><span class="pln"> </span><span class="pun">);</span></code>

		<p>
			In addition to observing progress, a LoadingManager can be used to
			override resource URLs during loading. This may be helpful for assets
			coming from drag-and-drop events, WebSockets, WebRTC, or other APIs. An
			example showing how to load an in-memory model using Blob URLs is below.
		</p>

		<code class=" prettyprint" translate="no"><span class="com">// Blob or File objects created when dragging files into the webpage.</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> blobs </span><span class="pun">=</span><span class="pln"> </span><span class="pun">{</span><span class="str">'fish.gltf'</span><span class="pun">:</span><span class="pln"> blob1</span><span class="pun">,</span><span class="pln"> </span><span class="str">'diffuse.png'</span><span class="pun">:</span><span class="pln"> blob2</span><span class="pun">,</span><span class="pln"> </span><span class="str">'normal.png'</span><span class="pun">:</span><span class="pln"> blob3</span><span class="pun">};</span><span class="pln">

</span><span class="kwd">const</span><span class="pln"> manager </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> THREE</span><span class="pun">.</span><span class="typ">LoadingManager</span><span class="pun">();</span><span class="pln">

</span><span class="com">// Initialize loading manager with URL callback.</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> objectURLs </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">
manager</span><span class="pun">.</span><span class="pln">setURLModifier</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> url </span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	url </span><span class="pun">=</span><span class="pln"> URL</span><span class="pun">.</span><span class="pln">createObjectURL</span><span class="pun">(</span><span class="pln"> blobs</span><span class="pun">[</span><span class="pln"> url </span><span class="pun">]</span><span class="pln"> </span><span class="pun">);</span><span class="pln">
	objectURLs</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln"> url </span><span class="pun">);</span><span class="pln">
	</span><span class="kwd">return</span><span class="pln"> url</span><span class="pun">;</span><span class="pln">

</span><span class="pun">}</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="com">// Load as usual, then revoke the blob URLs.</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> loader </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">GLTFLoader</span><span class="pun">(</span><span class="pln"> manager </span><span class="pun">);</span><span class="pln">
loader</span><span class="pun">.</span><span class="pln">load</span><span class="pun">(</span><span class="pln"> </span><span class="str">'fish.gltf'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">(</span><span class="pln">gltf</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

	scene</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln"> gltf</span><span class="pun">.</span><span class="pln">scene </span><span class="pun">);</span><span class="pln">
	objectURLs</span><span class="pun">.</span><span class="pln">forEach</span><span class="pun">(</span><span class="pln"> </span><span class="pun">(</span><span class="pln"> url </span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> URL</span><span class="pun">.</span><span class="pln">revokeObjectURL</span><span class="pun">(</span><span class="pln"> url </span><span class="pun">)</span><span class="pln"> </span><span class="pun">);</span><span class="pln">

</span><span class="pun">});</span></code>

		<h2>Examples</h2>

		<p>
			<a href="../examples/#webgl_loader_obj" target="_blank">WebGL / loader / obj</a><br>
			<a href="../examples/#webgl_postprocessing_outline" target="_blank">WebGL / postprocessing / outline</a>
		</p>

		<h2>Constructor</h2>
		<h3>
			LoadingManager( onLoad : <a class="param links" data-fragment="Function">Function</a>, onProgress : <a class="param links" data-fragment="Function">Function</a>,
			onError : <a class="param links" data-fragment="Function">Function</a> )
		</h3>
		<p>
			<a class="links" data-fragment="Function" title="Function">onLoad</a> — (optional) this function will be called when all
			loaders are done.<br>
			<a class="links" data-fragment="Function" title="Function">onProgress</a> — (optional) this function will be called when
			an item is complete.<br>
			<a class="links" data-fragment="Function" title="Function">onError</a> — (optional) this function will be called a loader
			encounters errors. <br>

			Creates a new LoadingManager.
		</p>

		<h2>Properties</h2>

		<h3><a class="permalink links" data-fragment="LoadingManager.onStart" target="_parent" title="LoadingManager.onStart" href="./index.html#api/en/loaders/managers/LoadingManager.onStart">#</a> .<a class="links" data-fragment="LoadingManager.onStart" id="onStart" href="./index.html#api/en/loaders/managers/LoadingManager.onStart">onStart</a>  : <a class="param links" data-fragment="Function">Function</a></h3>
		<p>
			This function will be called when loading starts. The arguments are:<br>
			<a class="links" data-fragment="String" title="String">url</a> — The url of the item just loaded.<br>
			<a class="links" data-fragment="Integer" title="Integer">itemsLoaded</a> — the number of items already loaded so far.<br>
			<a class="links" data-fragment="Integer" title="Integer">itemsTotal</a> — the total amount of items to be loaded.<br><br>

			By default this is undefined.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.onLoad" target="_parent" title="LoadingManager.onLoad" href="./index.html#api/en/loaders/managers/LoadingManager.onLoad">#</a> .<a class="links" data-fragment="LoadingManager.onLoad" id="onLoad" href="./index.html#api/en/loaders/managers/LoadingManager.onLoad">onLoad</a>  : <a class="param links" data-fragment="Function">Function</a></h3>
		<p>
			This function will be called when all loading is completed. By default
			this is undefined, unless passed in the constructor.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.onProgress" target="_parent" title="LoadingManager.onProgress" href="./index.html#api/en/loaders/managers/LoadingManager.onProgress">#</a> .<a class="links" data-fragment="LoadingManager.onProgress" id="onProgress" href="./index.html#api/en/loaders/managers/LoadingManager.onProgress">onProgress</a>  : <a class="param links" data-fragment="Function">Function</a></h3>
		<p>
			This function will be called when an item is complete. The arguments
			are:<br>
			<a class="links" data-fragment="String" title="String">url</a> — The url of the item just loaded.<br>
			<a class="links" data-fragment="Integer" title="Integer">itemsLoaded</a> — the number of items already loaded so far.<br>
			<a class="links" data-fragment="Integer" title="Integer">itemsTotal</a> — the total amount of items to be loaded.<br><br>

			By default this is undefined, unless passed in the constructor.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.onError" target="_parent" title="LoadingManager.onError" href="./index.html#api/en/loaders/managers/LoadingManager.onError">#</a> .<a class="links" data-fragment="LoadingManager.onError" id="onError" href="./index.html#api/en/loaders/managers/LoadingManager.onError">onError</a>  : <a class="param links" data-fragment="Function">Function</a></h3>
		<p>
			This function will be called when any item errors, with the argument:<br>
			<a class="links" data-fragment="String" title="String">url</a> — The url of the item that errored.<br><br>

			By default this is undefined, unless passed in the constructor.
		</p>

		<h2>Methods</h2>

		<h3>
			<a class="permalink links" data-fragment="LoadingManager.addHandler" target="_parent" title="LoadingManager.addHandler" href="./index.html#api/en/loaders/managers/LoadingManager.addHandler">#</a> .<a class="links" data-fragment="LoadingManager.addHandler" id="addHandler" href="./index.html#api/en/loaders/managers/LoadingManager.addHandler">addHandler</a> ( regex : <span class="param">Object</span>, loader : <a class="param links" data-fragment="Loader" href="./index.html#api/en/loaders/Loader">Loader</a> ) : <span class="param">this</span>
		</h3>
		<p>
			<a class="links" data-fragment="Object" title="Object">regex</a> — A regular expression.<br>
			<a class="links" data-fragment="Loader" title="Loader" href="./index.html#api/en/loaders/Loader">loader</a> — The loader.
		</p>

		<p>
			Registers a loader with the given regular expression. Can be used to
			define what loader should be used in order to load specific files. A
			typical use case is to overwrite the default loader for textures.
		</p>
		<code class=" prettyprint" translate="no"><span class="com">// add handler for TGA textures </span><span class="pln">
manager</span><span class="pun">.</span><span class="pln">addHandler</span><span class="pun">(</span><span class="pln"> </span><span class="str">/\.tga$/</span><span class="pln">i</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">TGALoader</span><span class="pun">()</span><span class="pln"> </span><span class="pun">);</span></code>

		<h3><a class="permalink links" data-fragment="LoadingManager.getHandler" target="_parent" title="LoadingManager.getHandler" href="./index.html#api/en/loaders/managers/LoadingManager.getHandler">#</a> .<a class="links" data-fragment="LoadingManager.getHandler" id="getHandler" href="./index.html#api/en/loaders/managers/LoadingManager.getHandler">getHandler</a> ( file : <span class="param">String</span> ) : <a class="param links" data-fragment="Loader" href="./index.html#api/en/loaders/Loader">Loader</a></h3>
		<p><a class="links" data-fragment="String" title="String">file</a> — The file path.</p>

		<p>
			Can be used to retrieve the registered loader for the given file path.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.removeHandler" target="_parent" title="LoadingManager.removeHandler" href="./index.html#api/en/loaders/managers/LoadingManager.removeHandler">#</a> .<a class="links" data-fragment="LoadingManager.removeHandler" id="removeHandler" href="./index.html#api/en/loaders/managers/LoadingManager.removeHandler">removeHandler</a> ( regex : <span class="param">Object</span> ) : <span class="param">this</span></h3>
		<p><a class="links" data-fragment="Object" title="Object">regex</a> — A regular expression.</p>

		<p>Removes the loader for the given regular expression.</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.resolveURL" target="_parent" title="LoadingManager.resolveURL" href="./index.html#api/en/loaders/managers/LoadingManager.resolveURL">#</a> .<a class="links" data-fragment="LoadingManager.resolveURL" id="resolveURL" href="./index.html#api/en/loaders/managers/LoadingManager.resolveURL">resolveURL</a> ( url : <span class="param">String</span> ) : <span class="param">String</span></h3>
		<p>
			<a class="links" data-fragment="String" title="String">url</a> — the url to load<br><br>

			Given a URL, uses the URL modifier callback (if any) and returns a
			resolved URL. If no URL modifier is set, returns the original URL.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.setURLModifier" target="_parent" title="LoadingManager.setURLModifier" href="./index.html#api/en/loaders/managers/LoadingManager.setURLModifier">#</a> .<a class="links" data-fragment="LoadingManager.setURLModifier" id="setURLModifier" href="./index.html#api/en/loaders/managers/LoadingManager.setURLModifier">setURLModifier</a> ( callback : <a class="param links" data-fragment="Function">Function</a> ) : <span class="param">this</span></h3>
		<p>
			<a class="links" data-fragment="Function" title="Function">callback</a> — URL modifier callback. Called with <a class="links" data-fragment="String" title="String">url</a> argument, 
			and must return <a class="links" data-fragment="String" title="String">resolvedURL</a>.<br><br>

			If provided, the callback will be passed each resource URL before a
			request is sent. The callback may return the original URL, or a new URL to
			override loading behavior. This behavior can be used to load assets from
			.ZIP files, drag-and-drop APIs, and Data URIs.
		</p>

		<br>

		<p>
			<em>
				Note: The following methods are designed to be called internally by
				loaders. You shouldn't call them directly.
			</em>
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.itemStart" target="_parent" title="LoadingManager.itemStart" href="./index.html#api/en/loaders/managers/LoadingManager.itemStart">#</a> .<a class="links" data-fragment="LoadingManager.itemStart" id="itemStart" href="./index.html#api/en/loaders/managers/LoadingManager.itemStart">itemStart</a> ( url : <span class="param">String</span> ) : <span class="param">undefined</span></h3>
		<p>
			<a class="links" data-fragment="String" title="String">url</a> — the url to load<br><br>

			This should be called by any loader using the manager when the loader
			starts loading an url.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.itemEnd" target="_parent" title="LoadingManager.itemEnd" href="./index.html#api/en/loaders/managers/LoadingManager.itemEnd">#</a> .<a class="links" data-fragment="LoadingManager.itemEnd" id="itemEnd" href="./index.html#api/en/loaders/managers/LoadingManager.itemEnd">itemEnd</a> ( url : <span class="param">String</span> ) : <span class="param">undefined</span></h3>
		<p>
			<a class="links" data-fragment="String" title="String">url</a> — the loaded url<br><br>

			This should be called by any loader using the manager when the loader
			ended loading an url.
		</p>

		<h3><a class="permalink links" data-fragment="LoadingManager.itemError" target="_parent" title="LoadingManager.itemError" href="./index.html#api/en/loaders/managers/LoadingManager.itemError">#</a> .<a class="links" data-fragment="LoadingManager.itemError" id="itemError" href="./index.html#api/en/loaders/managers/LoadingManager.itemError">itemError</a> ( url : <span class="param">String</span> ) : <span class="param">undefined</span></h3>
		<p>
			<a class="links" data-fragment="String" title="String">url</a> — the loaded url<br><br>

			This should be called by any loader using the manager when the loader
			errors loading an url.
		</p>

		<h2>Source</h2>

		<p>
			<a href="https://github.com/mrdoob/three.js/blob/master/src/loaders/LoadingManager.js" target="_blank">src/loaders/LoadingManager.js</a>
		</p>
	

<div id="button"><img src="../files/ic_mode_edit_black_24dp.svg"></div></body></body></html>